{"version":3,"sources":["fb.js","stringCount.js","key.js","scale.js","stringSet.js","chords.js","App.js","index.js"],"names":["renderFretboard","stringCount","stringSet","keyName","scaleName","triads","tuning","slice","Math","abs","notes","Set","Object","values","flat","f","Fretboard","el","fretCount","dotText","note","interval","dotFill","includes","Number","scale","FretboardSystem","getScale","type","root","setDots","filter","s","string","render","StringCount","props","Col","xs","options","value","defaultOption","onChange","placeholder","Key","useState","flats","setFlats","className","checked","style","marginRight","Scale","ScaleType","all","map","scaleType","name","sort","items","label","propagateOnChange","checkboxes","document","querySelectorAll","i","length","push","boxes","textAlign","display","Chords","triad","triadNotes","obj","Table","striped","bordered","hover","modeNames","get","e","seventhNotes","Chord","detect","seventh","keys","join","initialState","sevenths","reducer","state","action","payload","undefined","Error","App","useReducer","dispatch","useEffect","getElementById","fretboard","createElement","setAttribute","appendChild","remove","id","Container","Row","rootElement","createRoot"],"mappings":"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","file":"static/js/main.bc9aa1f3.chunk.js","sourcesContent":["import { Fretboard, FretboardSystem } from \"@moonwave99/fretboard.js\";\n\nconst renderFretboard = ({\n  stringCount,\n  stringSet,\n  keyName,\n  scaleName,\n  triads\n}) => {\n  const fretCount = 12;\n  const baseTuning = [\"F#1\", \"B2\", \"E2\", \"A2\", \"D3\", \"G3\", \"B3\", \"E4\"];\n  // const tuning = [\"E2\", \"A2\", \"D3\", \"G3\", \"B3\", \"E4\"];\n\n  const tuning = baseTuning.slice(-Math.abs(stringCount));\n\n  const notes = [...new Set(Object.values(triads).flat(1))];\n\n  const f = new Fretboard({\n    el: \"#fretboard\",\n    fretCount,\n    dotText: ({ note, interval }) => note + interval,\n    dotFill: ({ note }) => (notes.includes(note) ? \"red\" : \"white\"),\n    tuning,\n    stringCount: Number(stringCount)\n  });\n\n  const system = new FretboardSystem({ tuning, fretCount });\n\n  const scale = system.getScale({\n    type: scaleName,\n    root: keyName\n  });\n\n  f.setDots(scale.filter((s) => stringSet.includes(s.string)));\n  f.render();\n};\n\nexport default renderFretboard;\n","import Dropdown from \"react-dropdown\";\nimport \"react-dropdown/style.css\";\n\nimport Col from \"react-bootstrap/Col\";\n\nconst StringCount = (props) => {\n  const options = [\"6\", \"7\", \"8\"];\n\n  return (\n    <Col xs={2}>\n      String Count\n      <Dropdown\n        options={options}\n        value={props.defaultOption}\n        onChange={({ value }) => props.onChange(value)}\n        placeholder=\"Select an option\"\n      />\n    </Col>\n  );\n};\n\nexport default StringCount;\n","import Dropdown from \"react-dropdown\";\nimport \"react-dropdown/style.css\";\n\nimport { useState } from \"react\";\n\nimport Col from \"react-bootstrap/Col\";\n\nconst Key = (props) => {\n  const [flats, setFlats] = useState(false);\n\n  const sharpsOptions = [\n    \"A\",\n    \"A#\",\n    \"B\",\n    \"C\",\n    \"C#\",\n    \"D\",\n    \"D#\",\n    \"E\",\n    \"F\",\n    \"F#\",\n    \"G\",\n    \"G#\"\n  ];\n\n  const flatsOptions = [\n    \"A\",\n    \"Bb\",\n    \"B\",\n    \"C\",\n    \"Db\",\n    \"D\",\n    \"Eb\",\n    \"E\",\n    \"F\",\n    \"Gb\",\n    \"G\",\n    \"Ab\"\n  ];\n\n  return (\n    <Col xs={2}>\n      Key\n      <div className=\"float-end\">\n        <input\n          type=\"checkbox\"\n          checked={flats}\n          onChange={() => setFlats(!flats)}\n          style={{ marginRight: 5 }}\n        />\n        Flats\n      </div>\n      <Dropdown\n        options={flats ? flatsOptions : sharpsOptions}\n        value={props.defaultOption}\n        onChange={({ value }) => props.onChange(value)}\n        placeholder=\"Select an option\"\n      />\n    </Col>\n  );\n};\n\nexport default Key;\n","import Dropdown from \"react-dropdown\";\nimport \"react-dropdown/style.css\";\nimport { ScaleType } from \"@tonaljs/tonal\";\n\nimport Col from \"react-bootstrap/Col\";\n\nconst Scale = (props) => {\n  const options = ScaleType.all()\n    .map((scaleType) => scaleType.name)\n    .filter((name) => ![\"major\"].includes(name))\n    .sort();\n\n  return (\n    <Col xs={2}>\n      Scale\n      <Dropdown\n        options={[\n          {\n            type: \"group\",\n            name: \"Common\",\n            items: [\n              { value: \"major\", label: \"major\" },\n              { value: \"minor\", label: \"minor\" }\n            ]\n          },\n          {\n            type: \"group\",\n            name: \"All\",\n            items: options\n          }\n        ]}\n        value={props.defaultOption}\n        onChange={({ value }) => props.onChange(value)}\n        placeholder=\"Select an option\"\n      />\n    </Col>\n  );\n};\n\nexport default Scale;\n","import Col from \"react-bootstrap/Col\";\n\nconst StringCount = (props) => {\n  const propagateOnChange = () => {\n    const values = [];\n    const checkboxes = document.querySelectorAll(\n      \"input[name=stringSet]:checked\"\n    );\n\n    for (var i = 0; i < checkboxes.length; i++) {\n      values.push(Number(checkboxes[i].value));\n    }\n\n    props.onChange(values);\n  };\n\n  const boxes = [];\n\n  for (let i = 1; i <= props.stringCount; i++) {\n    boxes.push(\n      <span style={{ marginRight: 5 }}>\n        <label style={{ textAlign: \"center\", display: \"inline-block\" }}>\n          <input\n            type=\"checkbox\"\n            name=\"stringSet\"\n            value={i}\n            onChange={propagateOnChange}\n            checked={props.stringSet.includes(i)}\n          />\n          <br />\n          {i}\n        </label>\n      </span>\n    );\n  }\n\n  return (\n    <Col xs={2}>\n      String Set\n      <div>{boxes}</div>\n    </Col>\n  );\n};\n\nexport default StringCount;\n","import Col from \"react-bootstrap/Col\";\nimport { Chord, Scale } from \"@tonaljs/tonal\";\n\nimport Table from \"react-bootstrap/Table\";\n\nconst Chords = ({ scaleName, keyName, triads, onChange }) => {\n  const propagateOnChange = (triad, triadNotes) => {\n    const obj = {};\n    obj[triad] = triadNotes;\n\n    onChange(obj);\n  };\n\n  return (\n    <Col xs={12}>\n      <div className=\"text-center mt-4 mb-2\">Chords</div>\n      <Table striped bordered hover>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Function</th>\n            <th>Triad Chord</th>\n            <th>Notes</th>\n            <th>Seventh Chord</th>\n            <th>Notes</th>\n          </tr>\n        </thead>\n        <tbody>\n          {Scale.modeNames(`${keyName} ${scaleName}`).map((s, i) => {\n            const notes = Scale.get(`${s[0]} ${s[1]}`).notes;\n            const triadNotes = notes.filter((e, i) => i % 2 === 0).slice(0, 3);\n            const seventhNotes = notes\n              .filter((e, i) => i % 2 === 0)\n              .slice(0, 4);\n\n            const triad = Chord.detect(triadNotes);\n            const seventh = Chord.detect(seventhNotes);\n\n            // const triadQuality = triad[0].replace(s[0], \"\");\n            // const seventhQuality = triad[0].replace(s[0], \"\");\n\n            // console.log(triad[0], Chord.get(triadQuality, s[0]).intervals);\n\n            return (\n              <tr>\n                <td>{i + 1}</td>\n                <td>\n                  {s[0]} {s[1]}\n                </td>\n                <td>\n                  <input\n                    type=\"checkbox\"\n                    name=\"triad\"\n                    value={triad[0]}\n                    onChange={() => propagateOnChange(triad[0], triadNotes)}\n                    checked={Object.keys(triads).includes(triad[0])}\n                  />\n                  {triad[0]}\n                </td>\n                <td>{triadNotes.join(\" \")}</td>\n                <td>{seventh[0]}</td>\n                <td>{seventhNotes.join(\" \")}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n    </Col>\n  );\n};\n\nexport default Chords;\n","import \"./styles.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport { useEffect, useReducer } from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\n\nimport renderFretboard from \"./fb\";\nimport StringCount from \"./stringCount\";\nimport Key from \"./key\";\nimport Scale from \"./scale\";\nimport StringSet from \"./stringSet\";\nimport Chords from \"./chords\";\n\nconst initialState = {\n  stringCount: \"6\",\n  keyName: \"G\",\n  scaleName: \"major\",\n  stringSet: [1, 2, 3, 4, 5, 6],\n  triads: {},\n  sevenths: {}\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"stringCount\":\n      const stringSet = [];\n      for (let i = 1; i <= action.payload; i++) {\n        stringSet.push(i);\n      }\n\n      return { ...state, stringCount: action.payload, stringSet: stringSet };\n    case \"stringSet\":\n      return { ...state, stringSet: action.payload };\n    case \"keyName\":\n      return { ...state, triads: {}, sevenths: {}, keyName: action.payload };\n    case \"scaleName\":\n      return { ...state, triads: {}, sevenths: {}, scaleName: action.payload };\n    case \"triads\":\n      let triads;\n      const triad = Object.keys(action.payload)[0];\n\n      if (Object.keys(state.triads).includes(triad)) {\n        triads = { ...state.triads };\n        delete triads[triad];\n        if (triads === undefined) {\n          triads = {};\n        }\n      } else {\n        triads = { ...state.triads, ...action.payload };\n      }\n      return { ...state, triads };\n    default:\n      throw new Error();\n  }\n}\n\nexport default function App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    // console.log(state);\n    const root = document.getElementById(\"fb-root\");\n    const fretboard = document.createElement(\"figure\");\n    fretboard.setAttribute(\"id\", \"fretboard\");\n    root.appendChild(fretboard);\n\n    renderFretboard(state);\n\n    return () => {\n      const element = document.getElementById(\"fretboard\");\n      element.remove();\n    };\n  }, [state]);\n\n  return (\n    <div className=\"App\">\n      <h1 style={{ textAlign: \"center\" }}>:)</h1>\n\n      <div id=\"fb-root\" />\n\n      <Container>\n        <Row className=\"justify-content-md-center\">\n          <StringCount\n            defaultOption={initialState.stringCount}\n            onChange={(stringCount) =>\n              dispatch({ type: \"stringCount\", payload: stringCount })\n            }\n          />\n          <StringSet\n            stringCount={state.stringCount}\n            stringSet={state.stringSet}\n            onChange={(stringSet) =>\n              dispatch({ type: \"stringSet\", payload: stringSet })\n            }\n          />\n          <Key\n            defaultOption={initialState.keyName}\n            onChange={(keyName) =>\n              dispatch({ type: \"keyName\", payload: keyName })\n            }\n          />\n          <Scale\n            defaultOption={initialState.scaleName}\n            onChange={(scale) =>\n              dispatch({ type: \"scaleName\", payload: scale })\n            }\n          />\n        </Row>\n        <Row className=\"justify-content-md-center\">\n          <Chords\n            {...state}\n            onChange={(triads) => dispatch({ type: \"triads\", payload: triads })}\n          />\n        </Row>\n      </Container>\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"sourceRoot":""}